# Alias, function, and prompt definitions for Bourne-derived shells.
# Sourced by .${SHELL}rc

# Aliases.
if [ "${_UNAME}" = "OpenBSD" ]; then
    alias dir="/bin/ls -l"
else
    alias dir="/bin/ls -lb"  # -b = C-style escapes for nongraphic characters
fi

[ -x "/usr/bin/lynx" ] && alias lynx="/usr/bin/lynx -accept_all_cookies"

[ -x "/usr/bin/less" ] && alias more="/usr/bin/less"

if [ "${_UNAME}" = "CYGWIN_NT" ]; then
    # -W: show windows as well as cygwin processes
    alias ps="ps -W"
fi

# Functions.
_cdhelper() {
    CMD="cd $1"
    shift
    for ARG in $*; do
        CMD=${CMD}/${ARG}
    done
    eval ${CMD}
}
home() {
    _cdhelper ${HOME} $*
}
src() {
    _cdhelper ${SRC} $*
}
u() {
    _cdhelper .. $*
}
uu() {
    _cdhelper ../.. $*
}
uuu() {
    _cdhelper ../../.. $*
}
uuuu() {
    _cdhelper ../../../.. $*
}

# Prompt.
# Determine the hostname.
_HOSTNAME=`hostname | /usr/bin/tr '[A-Z]' '[a-z]'`  # Convert to lowercase.
_HOSTNAME=${_HOSTNAME%%.*}  # Strip any domain suffix.
export _HOSTNAME

# \[ begin a sequence of non-printing characters
# \] end a sequence of non-printing characters
# \a an ASCII bell character (007)
# \e an ASCII escape character (033)
# \t the current time in 24-hour HH:MM:SS format
# \w the current working directory, with $HOME abbreviated with a tilde
# \$ if the effective UID is 0, a #, otherwise a $
# \e]0;STRING\a sets the icon name and window title to STRING
if [ "${EMACS}" != "t" ]; then
   PS1='\[\e]0;${_HOSTNAME}:\w\a\]\t ${_HOSTNAME}:\w\$ '
fi

# Set the window title to a default value when running ssh.  If the
# target machine is configured correctly, it will immediately set the
# window title back to something useful.  The 'tr' trick is a portable
# way to handle escaped chars with echo.
alias ssh="echo -n 'E]0;sshA' | tr 'EA' '\033\007'; ssh"

# Local Variables:
# mode:sh
# End:
