#!/bin/sh
#
# Runs multiple Python static checkers.
#

FILE=$1

checkpath() {
    # Return True if $1 is in ${PATH}.
    IFS=':'
    for dir in $PATH ; do
        if [ -x "$dir/$1" ]; then
           return 0
        fi
    done
    return 1
}

if checkpath pep8; then
    echo "## pep8"
    # E202 whitespace before ')'
    pep8 --ignore=E202 --repeat ${FILE}
fi

if checkpath pyflakes; then
    echo "## pyflakes"
    pyflakes ${FILE}
fi

if checkpath pychecker; then
    echo "## pychecker"
    pychecker ${FILE}
    # Cleanup generated bytecode file.
    if [ -f ${FILE}c ]; then
        rm ${FILE}c
    fi
fi

if checkpath pylint; then
    echo "## pylint"
    pylint ${FILE}
fi
